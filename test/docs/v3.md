# 메시지 리마인더 v3 - OpenAI 기반 AI 챗봇 업그레이드

## 완료된 개선사항 ✅

### 1. OpenAI API 통합
- **문제**: 기존 정규식 기반 파싱의 한계로 복잡한 자연어 처리 어려움
- **해결**: OpenAI GPT 모델을 활용한 지능형 일정 파싱 (항상 GPT 우선 사용)
- **구현**: 
  - OpenAI API 클라이언트 통합
  - 환경변수 기반 API 키 및 모델 설정 관리
  - GPT-3.5-turbo, GPT-4, GPT-4-turbo 지원
  - 기존 정규식 방식과의 하이브리드 구조 (폴백 지원)

### 2. 지능형 정보 요청 시스템
- **문제**: 정보가 부족한 경우 단순한 오류 메시지만 표시
- **해결**: AI가 부족한 정보를 파악하고 구체적으로 요청
- **구현**:
  - `needsMoreInfo` 플래그로 추가 정보 필요 여부 판단
  - `missingFields` 배열로 부족한 필드 구체적 안내
  - 친근하고 도움이 되는 안내 메시지 생성

### 3. 향상된 사용자 경험
- **문제**: 일정 등록 과정에서 사용자 피드백 부족
- **해결**: 시각적 피드백과 단계별 안내 제공
- **구현**:
  - 일정 정보 완성 시 초록색 확인 카드 표시
  - 추가 정보 필요 시 노란색 안내 카드 표시
  - 부족한 필드 목록을 명확히 표시

### 4. 지능형 제목 생성
- **문제**: 사용자가 명시적으로 제목을 말하지 않아도 적절한 제목 생성 필요
- **해결**: GPT를 통한 컨텍스트 기반 제목 자동 생성
- **구현**:
  - 사용자 입력 내용을 바탕으로 적절한 제목 추론
  - 간결하면서도 명확한 제목 생성
  - 예시: "내일 오후 3시에 회의가 있어" → "회의"

## 현재 프로젝트 상태

### ✅ 구현 완료된 기능
1. **AI 챗봇**: OpenAI GPT 모델 기반 지능형 자연어 파싱 (항상 GPT 우선 사용)
2. **일정 관리**: CRUD 기능 완전 구현 + 실시간 목록 업데이트
3. **사용자 관리**: 등록, 수정, 조회 기능 + 개선된 알림 설정
4. **이메일 알림**: Gmail SMTP를 통한 알림 발송 + 간소화된 설정 UI
5. **로컬 스토리지**: 모든 데이터 영구 저장
6. **반응형 UI**: 모바일/데스크톱 대응
7. **지능형 대화**: 정보 부족 시 구체적 추가 정보 요청

### 🔧 개선된 아키텍처
```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Presentation  │    │  Business Logic │    │   Data Layer    │
│     Layer       │    │     Layer       │    │     Layer       │
├─────────────────┤    ├─────────────────┤    ├─────────────────┤
│ - React Pages   │    │ - OpenAI AI     │    │ - Local Storage │
│ - Components    │    │ - Reminder Svc  │    │ - Email Service │
│ - UI Components │    │ - User Service  │    │ - JSON Storage  │
│ - 지능형 챗봇 UI│    │ - 하이브리드 AI │    │ - 실시간 동기화 │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

### 📁 프로젝트 구조 (v3 업데이트)
```
src/
├── app/                    # Next.js App Router 페이지
│   ├── chat/              # AI 챗봇 페이지 ✅ (OpenAI 통합)
│   ├── reminders/         # 일정 관리 페이지 ✅ (실시간 업데이트)
│   ├── profile/           # 사용자 설정 페이지 ✅ (개선된 알림 설정)
│   └── api/send-email/    # 이메일 발송 API ✅
├── components/            # React 컴포넌트
│   ├── ui/               # shadcn/ui 컴포넌트 ✅
│   ├── ChatBot.tsx       # AI 챗봇 컴포넌트 ✅ (지능형 UI)
│   ├── ReminderList.tsx  # 일정 목록 컴포넌트 ✅ (사용자별 필터링)
│   ├── ReminderForm.tsx  # 일정 등록/수정 폼 ✅
│   ├── UserProfile.tsx   # 사용자 정보 폼 ✅ (개선된 알림 설정)
│   ├── EmailSettings.tsx # 이메일 설정 컴포넌트 ✅ (UI 간소화)
│   └── Navigation.tsx    # 네비게이션 ✅
├── hooks/                # 커스텀 React Hooks
│   ├── useReminders.ts   # 일정 관리 훅 ✅
│   ├── useUser.ts        # 사용자 관리 훅 ✅
│   └── useChat.ts        # 챗봇 훅 ✅
├── services/             # 비즈니스 로직
│   ├── aiService.ts      # AI 챗봇 서비스 ✅ (OpenAI 통합)
│   ├── reminderService.ts # 일정 관리 서비스 ✅
│   ├── userService.ts    # 사용자 관리 서비스 ✅ (기본값 개선)
│   └── emailService.ts   # 이메일 알림 서비스 ✅
├── storage/              # 데이터 저장소
│   ├── localStorage.ts   # 로컬 스토리지 서비스 ✅
│   └── jsonStorage.ts    # JSON 데이터 관리 ✅
└── types/                # TypeScript 타입 정의
    ├── reminder.ts       # 일정 타입 ✅
    ├── user.ts          # 사용자 타입 ✅ (알림 설정 확장)
    └── chat.ts          # 챗봇 타입 ✅ (지능형 대화 지원)
```

### 🛠 기술 스택 (v3 업데이트)
- **Frontend**: Next.js 14, React 18, TypeScript
- **Styling**: Tailwind CSS, shadcn/ui
- **State Management**: React Hooks (useState, useEffect, useContext)
- **Storage**: localStorage (최소 스펙)
- **Email**: Nodemailer + Gmail SMTP
- **AI**: OpenAI GPT 모델 (3.5-turbo/4/4-turbo) + 정규식 폴백
- **API Integration**: OpenAI API (선택적)

### 🔐 보안 개선사항 (v3)
1. **환경변수 관리**: Gmail 계정 정보와 OpenAI API 키를 .env.local에서 관리
2. **입력 검증**: 모든 사용자 입력에 대한 유효성 검사
3. **에러 처리**: 적절한 에러 메시지 및 예외 처리
4. **UI 보안**: 민감한 설정 정보 노출 최소화
5. **API 보안**: OpenAI API 키 환경변수 보호

### 📋 사용 방법 (v3 업데이트)
1. **환경변수 설정**: 프로젝트 루트에 `.env.local` 파일 생성
   ```bash
   # Gmail 봇 계정 설정
   GMAIL_USER=your-gmail-bot@gmail.com
   GMAIL_APP_PASSWORD=your-16-digit-app-password
   
   # OpenAI API 설정 (선택사항)
   OPENAI_API_KEY=your-openai-api-key-here
   
   # GPT 모델 설정 (선택사항)
   OPENAI_MODEL=gpt-3.5-turbo  # 또는 gpt-4, gpt-4-turbo
   OPENAI_TEMPERATURE=0.3      # 창의성 수준 (0.0-2.0)
   OPENAI_MAX_TOKENS=500       # 최대 응답 길이
   ```
2. **사용자 등록**: 프로필 페이지에서 이메일 주소 및 알림 설정 등록
3. **알림 설정**: 
   - 이메일 알림 받기 체크박스
   - 일정 시작 전 알림 받기 체크박스
   - 몇분 전에 알림 받을지 선택 (5분~1일 전)
   - 일일 알림 시간 설정
4. **지능형 일정 입력**: AI 챗봇을 통해 자연어로 일정 입력
   - 정보가 부족하면 AI가 구체적으로 요청
   - 충분한 정보가 있으면 자동으로 일정 등록 제안
5. **일정 관리**: 일정 목록에서 실시간으로 수정, 삭제, 완료 처리
6. **이메일 알림**: 설정된 시간에 자동 알림 발송

### 🚀 다음 개선 계획
1. **데이터베이스 연동**: localStorage 대신 실제 DB 사용
2. **사용자 인증**: 로그인/회원가입 시스템
3. **AI 모델 업그레이드**: GPT-4 또는 최신 모델 사용
4. **알림 다양화**: SMS, 푸시 알림 등 추가
5. **일정 공유**: 다른 사용자와 일정 공유 기능
6. **알림 히스토리**: 발송된 알림 기록 관리
7. **반복 일정**: 주간/월간 반복 일정 설정
8. **음성 입력**: 음성으로 일정 등록 기능
9. **캘린더 연동**: Google Calendar, Outlook 등 외부 캘린더 연동